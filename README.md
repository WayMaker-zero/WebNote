# WebNote — 本地 Markdown 浏览与编辑（纯前端）

一个无需后端的本地 Markdown 目录浏览与编辑器。基于浏览器的 File System Access API，直接在页面中选择本地目录：
- 左侧树形目录展示 `.md/.markdown` 文件
- 右侧支持“渲染视图 / 编辑视图”切换
- 内置简洁的 Markdown 渲染（含代码块行号、表格等）
- 支持保存、快捷键保存与自动保存
- 适合用作个人笔记的轻量浏览与编辑工具

> 推荐使用 Chrome 或 Microsoft Edge 打开；Firefox 不支持写入，本项目将受限。


## 功能特性
- 目录选择与扫描：从本机选择任意目录，按“文件夹优先、名称升序”展示
- Markdown 渲染：标题、粗体、斜体、链接、列表、水平线、表格、代码块（带行号）
- 编辑能力：
  - 视图切换：渲染视图 ↔ 编辑视图
  - 保存与快捷键：保存按钮、⌘/Ctrl + S
  - 自动保存：每隔一段时间（默认 5 分钟）自动保存
  - 新建笔记：在当前目录创建 `.md` 文件（自动补全扩展名）
- 变更提醒与刷新：
  - 刷新目录树以获取本地新增/删除/改名
  - 如页面内容未保存，刷新或打开新文件时进行提示，避免丢失更改
- UI 细节：深色主题、状态栏、侧边树展开记忆、滚动优化


## 如何使用

### 在线使用（免安装，推荐）
- 访问：`https://ji-webnote.netlify.app/`
- 浏览器建议：Chrome / Edge（Chromium 内核）
- 首次进入后：
  - 点击“选择目录”，授权访问包含 Markdown 的本地目录
  - 在左侧树选择文件，右上角可“切换为编辑视图/渲染视图”
  - 点击“保存”或使用 ⌘/Ctrl + S 写回本地
  - 使用“刷新”同步本地外部变更；“新建笔记”可在当前目录创建文件
- 隐私说明：本应用完全在你的浏览器本地运行，所选目录与笔记文件仅在本机处理，不会被上传或收集。

### 本地启动（Python）
1. 在项目根目录启动本地静态服务器（任选其一）：
   - Python 自带：http.server

     ```
     python -m http.server 8282
     ```

   - 也可使用 VS Code Live Server/Live Preview、Caddy、static-web-server 等
2. 使用 Chrome/Edge 打开 `http://localhost:8282`
3. 点击“选择目录”并按需编辑、保存、刷新或新建笔记
4. 隐私说明：所有笔记操作均在本地浏览器完成，不会被上传或收集。


## 使用提示
- 安全与权限：浏览器仅能访问你授权的目录范围；更换目录需重新授权
- 兼容性：
  - Firefox 暂不支持 File System Access API（只读降级也无法写回）
  - Safari 支持不完整，写入能力可能受限
- 离线使用：在 `http://localhost` 下可完全离线；若以 `file://` 打开，将因安全上下文不足而无法使用目录访问能力
- 冲突处理：如果本地文件在外部被修改，建议先“刷新”；若页面中存在未保存更改，操作前会提示


## 键盘快捷键
- 保存当前文件：⌘/Ctrl + S


## 目录结构
- `index.html`：入口页面，加载样式与脚本
- `styles/style.css`：深色主题与排版、代码块行号、表格样式
- `src/app.js`：应用主逻辑（状态管理、事件绑定、视图切换、自动保存等）
- `src/fs.js`：文件系统能力封装（目录选择、扫描、读写、新建）
- `src/ui.js`：侧边树渲染与交互
- `src/markdown.js`：无依赖的轻量 Markdown 渲染器
- `Docs/`：项目背景、可行性与运行方案等设计文档


## 常见问题（FAQ）
- 为什么必须用 Chrome/Edge？
  - 因为写入本地文件依赖 File System Access API，当前在 Chromium 浏览器支持最好
- 一定要用 8282 端口吗？
  - 否。任意端口均可，关键是通过 `http://localhost` 或 HTTPS 提供页面
- 能否部署到 GitHub Pages？
  - 可以，但需 HTTPS 且浏览器仍会在首次使用时请求目录访问权限。详见 `Docs/本地运行通用方案研究.md`


## 开发与贡献
- 克隆仓库后，使用任意静态服务器在项目根目录启动服务
- 代码无构建步骤，直接在浏览器中调试
- 欢迎提出 Issue/PR，或在 `Docs/` 中补充设计与方案


## 许可证
- 未声明许可证。如需开源分发，请根据实际情况补充 LICENSE。
